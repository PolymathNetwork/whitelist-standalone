(window["webpackJsonpwhitelist-standalone"]=window["webpackJsonpwhitelist-standalone"]||[]).push([[0],{1135:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(13),c=n.n(o),i=(n(442),n(5)),l=n.n(i),s=n(92),d=n(195),u=n(187),E=n(1137),p=n(154),f=n(1142),m=n(16),y=n(424),O=n(1138),h=n(198),k=n(22),v=n.n(k),g={CONNECTING:"connecting",CONNECTED:"connected",CONNECTION_ERROR:"connection_error",RESET:"reset",ERROR:"error",FETCHED_TOKENS:"fetched_tokens",FETCHING_TOKENS:"fetching_tokens",TOKENHOLDERS_FETCHED:"tokenholders_fetched",STORE_TOKENHOLDERS:"store_tokenholders",RELOAD_TOKENHOLDERS:"reload_tokenholders",TOKEN_SELECTED:"token_selected",DELETING_TOKENHOLDER:"deleting_tokenholder",TOKENHOLDER_DELETED:"tokenholder_deleted"},T=f.a.Text,b=f.a.Title;function w(e){var t=e.tokenSelectOpts,n=Object(r.useContext)(fe);return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:250,justifyContent:"flex-start"}},a.a.createElement(b,{level:3},"Please Select a Token"),a.a.createElement(T,{style:{paddingTop:20,paddingBottom:20,width:"100%"}},"Once you select a token, you will be able to manage token holders white-list by adding, editing or removing token holders."),a.a.createElement(p.a,{autoFocus:!0,showSearch:!0,style:{width:"100%",marginBottom:40},placeholder:"Select a token",optionFilterProp:"children",onChange:function(e){return n({type:g.TOKEN_SELECTED,selectedToken:e})},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},t))}var C=n(417),x=n(259),D=n(1141),N=n(63),R=n(1145),S=n(1143),A=n(1144),_=n(1140),j=n(1136),I=n(1139);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=a.a.Fragment,P=D.a.Item,H={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},B={address:"",canSendAfter:v()().add(1,"hour"),canReceiveAfter:v()().add(1,"hour"),kycExpiry:v()().add(1,"year"),canBuyFromSto:!0,isAccredited:!1},G={editIndex:"",visible:!1,ongoingTx:!1},M=function(e,t){switch(t.type){case"OPEN_FORM":return L({},e,{visible:!0,editIndex:t.payload.editIndex});case"CLOSE_FORM":return L({},e,{editIndex:"",visible:!1,ongoingTx:!1});case"TX_SEND":return L({},e,{ongoingTx:!0});case"TX_RECEIPT":return L({},e,{ongoingTx:!1,visible:!1,error:"",editIndex:""});case"TX_ERROR":return L({},e,{error:t.payload.error,ongoingTx:!1});default:return e}},U=I.a.Column,Y=f.a.Text;function X(e){return v()(e).format("YYYY-MM-DD")}function q(e){return e?a.a.createElement(K,null,a.a.createElement(m.a,{style:{color:"#00AA5E"},type:"check-circle",theme:"filled"}),a.a.createElement("span",{style:{paddingLeft:10}},"Yes")):a.a.createElement(K,null,a.a.createElement(m.a,{style:{color:"#DB2C3E"},type:"close-circle",theme:"filled"}),a.a.createElement("span",{style:{paddingLeft:10}},"No"))}var W=function(e){var t=e.tokenholders,n=e.openForm,r=e.removeTokenholders;return a.a.createElement(I.a,{dataSource:t,rowKey:"address"},a.a.createElement(U,{title:"Address",dataIndex:"address",key:"address",render:function(e){return a.a.createElement(Y,null,x.utils.toChecksumAddress(e))}}),a.a.createElement(U,{title:"Can send after",dataIndex:"canSendAfter",key:"canSendAfter",render:function(e){return X(e)}}),a.a.createElement(U,{title:"Can receive after",dataIndex:"canReceiveAfter",key:"canReceiveAfter",render:function(e){return X(e)}}),a.a.createElement(U,{title:"KYC expiry",dataIndex:"kycExpiry",key:"kycExpiry",render:function(e){return X(e)}}),a.a.createElement(U,{title:"Can buy from STO",dataIndex:"canBuyFromSto",key:"canBuyFromSto",render:function(e){return q(e)}}),a.a.createElement(U,{title:"Is accredited",dataIndex:"isAccredited",key:"isAccredited",render:function(e){return q(e)}}),a.a.createElement(U,{render:function(e,t){return a.a.createElement(K,null,a.a.createElement(N.a,{onClick:function(){return n(t.address)}},a.a.createElement(m.a,{type:"edit",theme:"filled"})),a.a.createElement(N.a,{onClick:function(){return r([t.address])}},a.a.createElement(m.a,{type:"delete",theme:"filled"})))}}))},z=function(e){var t=e.modifyWhitelist,n=e.tokenholders,o=e.removeTokenholders,c=Object(C.a)(),i=c.getFieldDecorator,u=c.setFieldsValue,E=c.resetFields,p=c.validateFields,f=Object(r.useReducer)(M,G),m=Object(d.a)(f,2),O=m[0],h=m[1],k=O.visible,v=O.editIndex,g=O.ongoingTx,T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h({type:"OPEN_FORM",payload:{editIndex:e}})},b=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(["address","canSendAfter","canReceiveAfter","kycExpiry","canBuyFromSto","isAccredited"],{force:!0}).then(function(){var e=Object(s.a)(l.a.mark(function e(n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"TX_SEND"}),n.canSendAfter=n.canSendAfter.toDate(),n.canReceiveAfter=n.canReceiveAfter.toDate(),n.kycExpiry=n.kycExpiry.toDate(),e.prev=4,e.next=7,t([n]);case 7:h({type:"TX_RECEIPT"}),E(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),h({type:"TX_ERROR",payload:{error:e.t0.message}}),R.a.error(e.t0.message);case 15:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=n.filter(function(e){return e.address===v})[0];return Object(r.useEffect)(function(){u(w||B)},[w,u]),a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(N.a,{type:"primary",style:{marginBottom:20,alignSelf:"flex-end"},onClick:T},"Add new"),a.a.createElement(W,{tokenholders:n,removeTokenholders:o,openForm:T}),a.a.createElement(S.a,{title:w?"Edit token holder":"Add a new token holder",okText:"Save",closable:!1,visible:k,footer:null},a.a.createElement(y.a,{spinning:g,size:"large"},a.a.createElement(D.a,H,a.a.createElement(P,{name:"address",label:"Address"},i("address",{rules:[{required:!0},{validator:function(e,t,n){w||x.utils.isAddress(t)?n():n("Address is invalid")}},{validator:function(e,t,r){var a;w||(a=t,void 0===n.find(function(e){return e.address.toUpperCase()===a.toUpperCase()}))?r():r("Tokenholder is already present in the whitelist")}}]})(a.a.createElement(A.a,{disabled:!!w}))),a.a.createElement(P,{name:"canSendAfter",label:"Can Send after"},i("canSendAfter",{rules:[{required:!0}]})(a.a.createElement(_.a,null))),a.a.createElement(P,{name:"canReceiveAfter",label:"Can Receive After"},i("canReceiveAfter",{rules:[{required:!0}]})(a.a.createElement(_.a,null))),a.a.createElement(P,{name:"kycExpiry",label:"KYC Expiry"},i("kycExpiry",{rules:[{required:!0}]})(a.a.createElement(_.a,null))),a.a.createElement(P,{name:"canBuyFromSto",label:"Can Buy from STO"},i("canBuyFromSto",{valuePropName:"checked"})(a.a.createElement(j.a,null))),a.a.createElement(P,{name:"isAccredited",label:"Accredited"},i("isAccredited",{valuePropName:"checked"})(a.a.createElement(j.a,null))),a.a.createElement(P,null,a.a.createElement(N.a,{onClick:function(){h({type:"CLOSE_FORM"}),E()}},"cancel"),a.a.createElement(N.a,{onClick:b},"save"))))))},J={1:{polymathRegistryAddress:"0xdfabf3e4793cd30affb47ab6fa4cf4eef26bbc27"},42:{polymathRegistryAddress:"0x5b215a7d39ee305ad28da29bf2f0425c6c2a00b3"}};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q=E.a.Content,Z=E.a.Header,ee=p.a.Option,te=f.a.Text,ne={tokenholders:[],tokens:void 0,editingTokenholder:!1,selectedToken:void 0,fetching:!1,walletAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0,tip:""};function re(e,t){switch(console.log("ACTION",t),t.type){case g.CONNECTING:return $({},e,{connecting:!0,tip:"Connecting...",error:void 0});case g.CONNECTED:return $({},e,{polyClient:t.polyClient,networkId:t.networkId,walletAddress:t.walletAddress,connecting:!1,tip:"",error:void 0});case g.CONNECTION_ERROR:return $({},e,{error:t.error,tokens:void 0,connecting:!1,tip:""});case g.FETCHING_TOKENS:return $({},e,{fetching:!0,tip:"Fetching tokens"});case g.FETCHED_TOKENS:var n=t.tokens;return $({},e,{tokenSelectOpts:t.tokenSelectOpts,tokens:n,fetching:!1,tip:""});case g.TOKEN_SELECTED:return $({},e,{selectedToken:t.selectedToken,tip:"Loading tokenholders...",fetching:!0});case g.RELOAD_TOKENHOLDERS:return $({},e,{fetching:!0,tip:"Reloading tokenholders...",reloadTokenholders:!0});case g.TOKENHOLDERS_FETCHED:var r=t.tokenholders;return $({},e,{tokenholders:r=r.map(function(e){return Object.assign({},e,{canReceiveAfter:v()(e.canReceiveAfter),canSendAfter:v()(e.canSendAfter),kycExpiry:v()(e.kycExpiry)})}),fetching:!1,tip:"",reloadTokenholders:!1});case g.DELETING_TOKENHOLDER:return $({},e,{fetching:!0,tip:"Deleting token holder"});case g.TOKENHOLDER_DELETED:return $({},e,{fetching:!1,tip:""});case g.ERROR:return $({},e,{error:t.error,fetching:!1});default:throw new Error('Unrecognized action "'.concat(t.type,'"'))}}function ae(e){var t=e.networkId;t=t.toString();return a.a.createElement(r.Fragment,null,a.a.createElement(m.a,{type:"global",style:{marginRight:10,marginLeft:20}}),a.a.createElement(te,null,{0:"Disconnected",1:"Mainnet",42:"Kovan"}[t]))}function oe(e){var t=e.walletAddress;return t?a.a.createElement(r.Fragment,null,a.a.createElement(m.a,{type:"user",style:{marginRight:5,marginLeft:10}}),a.a.createElement(te,null,t)):null}var ce=function(){var e=Object(r.useReducer)(re,ne),t=Object(d.a)(e,2),n=t[0],o=t[1],c=n.tokenholders,i=n.tokens,u=n.selectedToken,p=n.fetching,f=n.tip,m=n.walletAddress,k=n.connecting,v=n.error,T=n.networkId,b=n.connected,C=n.polyClient,x=n.reloadTokenholders,D=n.tokenSelectOpts;function N(){return(N=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i[u].tokenholders.modifyData({tokenholderData:t});case 2:return n=e.sent,e.next=5,n.run();case 5:o({type:g.RELOAD_TOKENHOLDERS});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:g.DELETING_TOKENHOLDER}),e.prev=1,e.next=4,i[u].tokenholders.revokeKyc({tokenholderAddresses:t});case 4:return n=e.sent,e.next=7,n.run();case 7:o({type:g.TOKENHOLDER_DELETED}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:o({type:g.RELOAD_TOKENHOLDERS});case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}return Object(r.useEffect)(function(){function e(){return(e=Object(s.a)(l.a.mark(function e(t){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g.CONNECTING}),e.prev=1,e.next=4,h.browserUtils.getNetworkId();case 4:return n=e.sent,e.next=7,h.browserUtils.getCurrentAddress();case 7:if(r=e.sent,[-1,1,42].includes(n)){e.next=11;break}return t({type:g.CONNECTION_ERROR,error:"Please switch to either Main or Kovan network"}),e.abrupt("return");case 11:return a=J[n],o=new h.Polymath,e.next=15,o.connect(a);case 15:t({type:g.CONNECTED,networkId:n,polyClient:o,walletAddress:r}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),t({type:g.CONNECTION_ERROR,error:e.t0.message});case 21:case"end":return e.stop()}},e,null,[[1,18]])}))).apply(this,arguments)}b||function(t){e.apply(this,arguments)}(o)},[b]),Object(r.useEffect)(function(){function e(){return(e=Object(s.a)(l.a.mark(function e(t,n,r){var o,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g.FETCHING_TOKENS}),e.next=3,n.getSecurityTokens({walletAddress:r});case 3:o=e.sent,c=o.map(function(e,t){return a.a.createElement(ee,{value:t,key:t},e.symbol)}),t({type:g.FETCHED_TOKENS,tokens:o,tokenSelectOpts:c});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}C&&m&&!i&&function(t,n,r){e.apply(this,arguments)}(o,C,m)},[m,C,i]),Object(r.useEffect)(function(){function e(){return(e=Object(s.a)(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tokenholders.getTokenholders();case 2:r=e.sent,t({type:g.TOKENHOLDERS_FETCHED,tokenholders:r});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!0===x|void 0!==u&&function(t,n){e.apply(this,arguments)}(o,i[u])},[i,u,x]),a.a.createElement("div",{className:"App"},a.a.createElement(fe.Provider,{value:o},a.a.createElement(y.a,{spinning:p||k,tip:f,size:"large"},a.a.createElement(E.a,null,a.a.createElement(Z,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},a.a.createElement(ae,{networkId:T}),a.a.createElement(oe,{walletAddress:m})),a.a.createElement(Q,{style:{padding:50,backgroundColor:"#FAFDFF"}},v&&a.a.createElement(O.a,{message:v,type:"error"}),m&&a.a.createElement(w,{tokenSelectOpts:D}),void 0!==u&&a.a.createElement(z,{modifyWhitelist:function(e){return N.apply(this,arguments)},removeTokenholders:function(e){return R.apply(this,arguments)},tokenholders:c}))))))},ie=n(431),le=n(432),se=n(434),de=n(433),ue=n(435),Ee=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(de.a)(t).call(this,e))).state={hasError:!1},n}return Object(ue.a)(t,e),Object(le.a)(t,[{key:"componentDidCatch",value:function(e,t){var n;(n=console).error.apply(n,["ErrorBoundary"].concat(Array.prototype.slice.call(arguments)))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a.a.createContext(null),fe=t.default=pe;c.a.render(a.a.createElement(Ee,null,a.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},437:function(e,t,n){e.exports=n(1135)},442:function(e,t,n){},588:function(e,t){},590:function(e,t){},609:function(e,t){},611:function(e,t){},865:function(e,t){},993:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=993}},[[437,1,2]]]);
//# sourceMappingURL=main.26f86609.chunk.js.map