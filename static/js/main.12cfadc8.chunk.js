(window["webpackJsonpwhitelist-standalone"]=window["webpackJsonpwhitelist-standalone"]||[]).push([[0],{1147:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(7),o=r.n(c),i=(r(455),r(425)),s=r(443),l=r(444),d=r(446),u=r(445),f=r(448),p=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},r}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){var r;(r=console).error.apply(r,["ErrorBoundary"].concat(Array.prototype.slice.call(arguments)))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(p,null,a.a.createElement(i.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},425:function(e,t,r){"use strict";(function(e){var n=r(11),a=r.n(n),c=r(267),o=r(199),i=r(104),s=r(190),l=r(1),d=r.n(l),u=r(269),f=r(117),p=r(9),E=r(203),y=r(264),h=r(1148),m=r(202),v=r(19),O=r.n(v),g=r(59),b=r(447),x=r(442);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach(function(t){Object(s.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=u.a.Content,R=u.a.Header,C=f.a.Option;function A(){return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0}}function T(e,t){switch(t.type){case g.a.CONNECTING:return k({},e,{tip:"Connecting...",connecting:!0,error:void 0});case g.a.CONNECTED:return k({},e,{},t.payload,{connecting:!1,tip:void 0,error:void 0});case g.a.CONNECTION_ERROR:return k({},e,{error:t.payload.error,connecting:!1});case g.a.TOKEN_SELECTED:return k({},e,{tokenIndex:t.payload.tokenIndex,tip:"Loading investors whitelist...",fetching:!0});case g.a.SHAREHOLDERS_FETCHED:return k({},e,{fetching:!1,tip:void 0});case g.a.STORE_SHAREHOLDERS:var r=t.payload.shareholders;return k({},e,{shareholders:r=r.map(function(e){return Object.assign({},e,{canReceiveAfter:O()(e.canReceiveAfter),canSendAfter:O()(e.canSendAfter),kycExpiry:O()(e.kycExpiry)})})});case g.a.ERROR:return k({},e,{fetching:!1});case g.a.RESET:return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0};default:throw new Error('Unrecognised action "'.concat(t.type,'"'))}}function D(){return(D=Object(i.a)(a.a.mark(function e(t){var r,n,c,o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g.a.CONNECTING}),e.prev=1,e.next=4,m.browserUtils.getNetworkId();case 4:return r=e.sent,e.next=7,m.browserUtils.getCurrentAddress();case 7:if(n=e.sent,[-1,1,42].includes(r)){e.next=11;break}return t({type:g.a.CONNECTION_ERROR,payload:{error:"Please switch to either Main or Kovan network"}}),e.abrupt("return");case 11:return c=x.a[r],o=new m.Polymath,e.next=15,o.connect(c);case 15:return e.next=17,o.getSecurityTokens({owner:n});case 17:i=e.sent,t({type:g.a.CONNECTED,payload:{networkId:r,polyClient:o,tokens:i,userAddress:n}}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),t({type:g.a.CONNECTION_ERROR,payload:{error:e.t0.message}});case 24:case"end":return e.stop()}},e,null,[[1,21]])}))).apply(this,arguments)}function j(e,t){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(a.a.mark(function e(t,r){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.shareholders.getShareholders();case 2:n=e.sent,t({type:g.a.SHAREHOLDERS_FETCHED}),t({type:g.a.STORE_SHAREHOLDERS,payload:{shareholders:n}});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){var t=e.networkId;t=t.toString();return d.a.createElement(l.Fragment,null,d.a.createElement(p.a,{type:"global",style:{marginRight:10,marginLeft:20}}),d.a.createElement(E.a.Text,null,{0:"Disconnected",1:"Mainnet",42:"Kovan"}[t]))}function F(e){var t=e.userAddress;return t?d.a.createElement(l.Fragment,null,d.a.createElement(p.a,{type:"user",style:{marginRight:5,marginLeft:10}}),d.a.createElement(E.a.Text,null,t)):null}t.a=function(){var t=Object(l.useReducer)(T,{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0},A),r=Object(o.a)(t,2),n=r[0],s=r[1],p=n.shareholders,m=n.tokens,v=n.tokenIndex,O=n.fetching,x=n.tip,w=n.userAddress,k=n.connecting,I=n.error,_=n.networkId;function P(){return(P=Object(i.a)(a.a.mark(function e(t){var r,n,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m[v].shareholders.modifyData({shareholderData:t});case 2:return r=e.sent,e.next=5,r.run();case 5:n=new Set,o=[].concat(Object(c.a)(t),Object(c.a)(p)).filter(function(e){var t=n.has(e.address);return n.add(e.address),!t}),s({type:g.a.STORE_SHAREHOLDERS,payload:{shareholders:o}});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.map(function(e){return{address:e.address,canReceiveAfter:0,canSendAfter:0,kycExpiry:0,isAccredited:0,canBuyFromSto:0}}),e.next=3,m[v].shareholders.modifyData({shareholderData:t});case 3:return r=e.sent,e.next=6,r.run();case 6:return e.next=8,j(s,m[v]);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){!function(e){D.apply(this,arguments)}(s)},[]),Object(l.useEffect)(function(){void 0!==v&&(j(s,m[v]),e.token=m[v])},[m,v]),d.a.createElement("div",{className:"App"},d.a.createElement(y.a,{spinning:O||k,tip:x,size:"large"},d.a.createElement(u.a,null,d.a.createElement(R,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},d.a.createElement(N,{networkId:_}),d.a.createElement(F,{userAddress:w})),d.a.createElement(S,{style:{padding:50,backgroundColor:"#FAFDFF"}},I&&d.a.createElement(h.a,{message:I,type:"error"}),w&&d.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:250,justifyContent:"flex-start"}},d.a.createElement(E.a.Title,{level:3},"Please Select a Token"),d.a.createElement(E.a.Text,{style:{paddingTop:20,paddingBottom:20,width:"100%"}},"Once you select a token, you will be able to manage investors white-list by adding, editing or removing investors."),d.a.createElement(f.a,{autoFocus:!0,showSearch:!0,style:{width:"100%",marginBottom:40},placeholder:"Select a token",optionFilterProp:"children",onChange:function(e){return s({type:g.a.TOKEN_SELECTED,payload:{tokenIndex:e}})},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m?m.map(function(e,t){return d.a.createElement(C,{value:t,key:t},e.symbol)}):[])),void 0!==v&&d.a.createElement(b.a,{modifyWhitelist:function(e){return P.apply(this,arguments)},deleteShareholders:function(e){return H.apply(this,arguments)},shareholders:p})))))}}).call(this,r(38))},442:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={1:{polymathRegistryAddress:"0xdfabf3e4793cd30affb47ab6fa4cf4eef26bbc27"},42:{polymathRegistryAddress:"0x5b215a7d39ee305ad28da29bf2f0425c6c2a00b3"}}},447:function(e,t,r){"use strict";var n=r(11),a=r.n(n),c=r(104),o=r(199),i=r(190),s=r(1),l=r.n(s),d=r(426),u=r(19),f=r.n(u),p=r(191),E=r(1152),y=r(1155),h=r(69),m=r(1153),v=r(264),O=r(1154),g=r(1151),b=r(1149),x=r(1150),w=r(203),k=r(9),S=x.a.Column,R=w.a.Text;function C(e){return f()(e).format("YYYY-MM-DD")}function A(e){return e?l.a.createElement(s.Fragment,null,l.a.createElement(k.a,{style:{color:"#00AA5E"},type:"check-circle",theme:"filled"}),l.a.createElement("span",null,"   Yes")):l.a.createElement(s.Fragment,null,l.a.createElement(k.a,{style:{color:"#DB2C3E"},type:"close-circle",theme:"filled"}),l.a.createElement("span",null,"   No"))}var T=function(e){var t=e.shareholders,r=e.openForm;return l.a.createElement(x.a,{dataSource:t,rowKey:"address"},l.a.createElement(S,{title:"Address",dataIndex:"address",key:"address",render:function(e){return l.a.createElement(R,null,p.utils.toChecksumAddress(e))}}),l.a.createElement(S,{title:"Can send after",dataIndex:"canSendAfter",key:"canSendAfter",render:function(e){return C(e)}}),l.a.createElement(S,{title:"Can receive after",dataIndex:"canReceiveAfter",key:"canReceiveAfter",render:function(e){return C(e)}}),l.a.createElement(S,{title:"KYC expiry",dataIndex:"kycExpiry",key:"kycExpiry",render:function(e){return C(e)}}),l.a.createElement(S,{title:"Can buy from STO",dataIndex:"canBuyFromSto",key:"canBuyFromSto",render:function(e){return A(e)}}),l.a.createElement(S,{title:"Is accredited",dataIndex:"isAccredited",key:"isAccredited",render:function(e){return A(e)}}),l.a.createElement(S,{render:function(e,t){return l.a.createElement(s.Fragment,null,l.a.createElement(h.a,{onClick:function(){return r(t.address)}},l.a.createElement(k.a,{type:"edit",theme:"filled"})))}}))};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(r,!0).forEach(function(t){Object(i.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=E.a.Item,N={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},F={address:"",canSendAfter:f()().add(1,"hour"),canReceiveAfter:f()().add(1,"hour"),kycExpiry:f()().add(1,"year"),canBuyFromSto:!0,isAccredited:!1},_={editIndex:"",visible:!1,ongoingTx:!1},P=function(e,t){switch(t.type){case"OPEN_FORM":return j({},e,{visible:!0,editIndex:t.payload.editIndex});case"CLOSE_FORM":return j({},e,{editIndex:"",visible:!1,ongoingTx:!1});case"TX_SEND":return j({},e,{ongoingTx:!0});case"TX_RECEIPT":return j({},e,{ongoingTx:!1,visible:!1,error:"",editIndex:""});case"TX_ERROR":return j({},e,{error:t.payload.error,ongoingTx:!1});default:return e}};t.a=function(e){var t=e.modifyWhitelist,r=e.shareholders,n=Object(d.a)(),i=n.getFieldDecorator,u=n.setFieldsValue,f=n.resetFields,x=n.validateFields,w=Object(s.useReducer)(P,_),k=Object(o.a)(w,2),S=k[0],R=k[1],C=S.visible,A=S.editIndex,D=S.ongoingTx,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";R({type:"OPEN_FORM",payload:{editIndex:e}})},H=function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:x(["address","canSendAfter","canReceiveAfter","kycExpiry","canBuyFromSto","isAccredited"],{force:!0}).then(function(){var e=Object(c.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R({type:"TX_SEND"}),r.canSendAfter=r.canSendAfter.toDate(),r.canReceiveAfter=r.canReceiveAfter.toDate(),r.kycExpiry=r.kycExpiry.toDate(),e.prev=4,e.next=7,t([r]);case 7:R({type:"TX_RECEIPT"}),f(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),R({type:"TX_ERROR",payload:{error:e.t0.message}}),y.a.error(e.t0.message);case 15:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),L=r.filter(function(e){return e.address===A})[0];return Object(s.useEffect)(function(){u(L||F)},[L,u]),l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement(h.a,{type:"primary",style:{marginBottom:20,alignSelf:"flex-end"},onClick:j},"Add new"),l.a.createElement(T,{shareholders:r,openForm:j}),l.a.createElement(m.a,{title:L?"Edit shareholder":"Add a new shareholder",okText:"Save",closable:!1,visible:C,footer:null},l.a.createElement(v.a,{spinning:D,size:"large"},l.a.createElement(E.a,N,l.a.createElement(I,{name:"address",label:"Address"},i("address",{rules:[{required:!0},{validator:function(e,t,r){L||p.utils.isAddress(t)?r():r("Address is invalid")}},{validator:function(e,t,n){var a;L||(a=t,void 0===r.find(function(e){return e.address.toUpperCase()===a.toUpperCase()}))?n():n("Shareholder is already present in the whitelist")}}]})(l.a.createElement(O.a,{disabled:!!L}))),l.a.createElement(I,{name:"canSendAfter",label:"Can Send after"},i("canSendAfter",{rules:[{required:!0}]})(l.a.createElement(g.a,null))),l.a.createElement(I,{name:"canReceiveAfter",label:"Can Receive adter"},i("canReceiveAfter",{rules:[{required:!0}]})(l.a.createElement(g.a,null))),l.a.createElement(I,{name:"kycExpiry",label:"KYC Expiry"},i("kycExpiry",{rules:[{required:!0}]})(l.a.createElement(g.a,null))),l.a.createElement(I,{name:"canBuyFromSto",label:"Can Buy from STO"},i("canBuyFromSto",{valuePropName:"checked"})(l.a.createElement(b.a,null))),l.a.createElement(I,{name:"isAccredited",label:"Accredited"},i("isAccredited",{valuePropName:"checked"})(l.a.createElement(b.a,null))),l.a.createElement(I,null,l.a.createElement(h.a,{onClick:function(){R({type:"CLOSE_FORM"}),f()}},"cancel"),l.a.createElement(h.a,{onClick:H},"save"))))))}},450:function(e,t,r){e.exports=r(1147)},455:function(e,t,r){},533:function(e,t){},535:function(e,t){},555:function(e,t){},557:function(e,t){},59:function(e,t,r){"use strict";t.a={CONNECTING:"connecting",CONNECTED:"connected",CONNECTION_ERROR:"connection_error",RESET:"reset",ERROR:"error",SHAREHOLDERS_FETCHED:"shareholders_fetched",STORE_SHAREHOLDERS:"store_shareholders",TOKEN_SELECTED:"token_selected"}},890:function(e,t){},983:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=983}},[[450,1,2]]]);
//# sourceMappingURL=main.12cfadc8.chunk.js.map