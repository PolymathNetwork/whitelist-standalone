(window["webpackJsonpwhitelist-standalone"]=window["webpackJsonpwhitelist-standalone"]||[]).push([[0],{1018:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=1018},1160:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(7),o=r.n(c),i=(r(452),r(10)),l=r.n(i),s=r(97),d=r(201),u=r(193),E=r(1162),p=r(157),f=r(1167),h=r(9),m=r(434),y=r(1163),O=r(204),v=r(20),g=r.n(v),k={CONNECTING:"connecting",CONNECTED:"connected",CONNECTION_ERROR:"connection_error",RESET:"reset",ERROR:"error",FETCHED_TOKENS:"fetched_tokens",FETCHING_TOKENS:"fetching_tokens",SHAREHOLDERS_FETCHED:"shareholders_fetched",STORE_SHAREHOLDERS:"store_shareholders",RELOAD_SHAREHOLDERS:"reload_shareholders",TOKEN_SELECTED:"token_selected",DELETING_SHAREHOLDER:"deleting_shareholder",SHAREHOLDER_DELETED:"shareholder_deleted"},b=f.a.Text,S=f.a.Title;function w(e){var t=e.tokenSelectOpts,r=Object(n.useContext)(fe);return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:250,justifyContent:"flex-start"}},a.a.createElement(S,{level:3},"Please Select a Token"),a.a.createElement(b,{style:{paddingTop:20,paddingBottom:20,width:"100%"}},"Once you select a token, you will be able to manage token holders white-list by adding, editing or removing token holders."),a.a.createElement(p.a,{autoFocus:!0,showSearch:!0,style:{width:"100%",marginBottom:40},placeholder:"Select a token",optionFilterProp:"children",onChange:function(e){return r({type:k.TOKEN_SELECTED,selectedToken:e})},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},t))}var R=r(427),C=r(266),x=r(1166),A=r(68),T=r(1170),D=r(1168),N=r(1169),_=r(1165),j=r(1161),I=r(1164);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach(function(t){Object(u.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var L=a.a.Fragment,P=x.a.Item,K={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},B={address:"",canSendAfter:g()().add(1,"hour"),canReceiveAfter:g()().add(1,"hour"),kycExpiry:g()().add(1,"year"),canBuyFromSto:!0,isAccredited:!1},G={editIndex:"",visible:!1,ongoingTx:!1},M=function(e,t){switch(t.type){case"OPEN_FORM":return F({},e,{visible:!0,editIndex:t.payload.editIndex});case"CLOSE_FORM":return F({},e,{editIndex:"",visible:!1,ongoingTx:!1});case"TX_SEND":return F({},e,{ongoingTx:!0});case"TX_RECEIPT":return F({},e,{ongoingTx:!1,visible:!1,error:"",editIndex:""});case"TX_ERROR":return F({},e,{error:t.payload.error,ongoingTx:!1});default:return e}},U=I.a.Column,Y=f.a.Text;function X(e){return g()(e).format("YYYY-MM-DD")}function q(e){return e?a.a.createElement(L,null,a.a.createElement(h.a,{style:{color:"#00AA5E"},type:"check-circle",theme:"filled"}),a.a.createElement("span",{style:{paddingLeft:10}},"Yes")):a.a.createElement(L,null,a.a.createElement(h.a,{style:{color:"#DB2C3E"},type:"close-circle",theme:"filled"}),a.a.createElement("span",{style:{paddingLeft:10}},"No"))}var W=function(e){var t=e.shareholders,r=e.openForm,n=e.removeShareholders;return a.a.createElement(I.a,{dataSource:t,rowKey:"address"},a.a.createElement(U,{title:"Address",dataIndex:"address",key:"address",render:function(e){return a.a.createElement(Y,null,C.utils.toChecksumAddress(e))}}),a.a.createElement(U,{title:"Can send after",dataIndex:"canSendAfter",key:"canSendAfter",render:function(e){return X(e)}}),a.a.createElement(U,{title:"Can receive after",dataIndex:"canReceiveAfter",key:"canReceiveAfter",render:function(e){return X(e)}}),a.a.createElement(U,{title:"KYC expiry",dataIndex:"kycExpiry",key:"kycExpiry",render:function(e){return X(e)}}),a.a.createElement(U,{title:"Can buy from STO",dataIndex:"canBuyFromSto",key:"canBuyFromSto",render:function(e){return q(e)}}),a.a.createElement(U,{title:"Is accredited",dataIndex:"isAccredited",key:"isAccredited",render:function(e){return q(e)}}),a.a.createElement(U,{render:function(e,t){return a.a.createElement(L,null,a.a.createElement(A.a,{onClick:function(){return r(t.address)}},a.a.createElement(h.a,{type:"edit",theme:"filled"})),a.a.createElement(A.a,{onClick:function(){return n([t.address])}},a.a.createElement(h.a,{type:"delete",theme:"filled"})))}}))},z=function(e){var t=e.modifyWhitelist,r=e.shareholders,c=e.removeShareholders,o=Object(R.a)(),i=o.getFieldDecorator,u=o.setFieldsValue,E=o.resetFields,p=o.validateFields,f=Object(n.useReducer)(M,G),h=Object(d.a)(f,2),y=h[0],O=h[1],v=y.visible,g=y.editIndex,k=y.ongoingTx,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";O({type:"OPEN_FORM",payload:{editIndex:e}})},S=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(["address","canSendAfter","canReceiveAfter","kycExpiry","canBuyFromSto","isAccredited"],{force:!0}).then(function(){var e=Object(s.a)(l.a.mark(function e(r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"TX_SEND"}),r.canSendAfter=r.canSendAfter.toDate(),r.canReceiveAfter=r.canReceiveAfter.toDate(),r.kycExpiry=r.kycExpiry.toDate(),e.prev=4,e.next=7,t([r]);case 7:O({type:"TX_RECEIPT"}),E(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),O({type:"TX_ERROR",payload:{error:e.t0.message}}),T.a.error(e.t0.message);case 15:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=r.filter(function(e){return e.address===g})[0];return Object(n.useEffect)(function(){u(w||B)},[w,u]),a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(A.a,{type:"primary",style:{marginBottom:20,alignSelf:"flex-end"},onClick:b},"Add new"),a.a.createElement(W,{shareholders:r,removeShareholders:c,openForm:b}),a.a.createElement(D.a,{title:w?"Edit token holder":"Add a new token holder",okText:"Save",closable:!1,visible:v,footer:null},a.a.createElement(m.a,{spinning:k,size:"large"},a.a.createElement(x.a,K,a.a.createElement(P,{name:"address",label:"Address"},i("address",{rules:[{required:!0},{validator:function(e,t,r){w||C.utils.isAddress(t)?r():r("Address is invalid")}},{validator:function(e,t,n){var a;w||(a=t,void 0===r.find(function(e){return e.address.toUpperCase()===a.toUpperCase()}))?n():n("Tokenholder is already present in the whitelist")}}]})(a.a.createElement(N.a,{disabled:!!w}))),a.a.createElement(P,{name:"canSendAfter",label:"Can Send after"},i("canSendAfter",{rules:[{required:!0}]})(a.a.createElement(_.a,null))),a.a.createElement(P,{name:"canReceiveAfter",label:"Can Receive After"},i("canReceiveAfter",{rules:[{required:!0}]})(a.a.createElement(_.a,null))),a.a.createElement(P,{name:"kycExpiry",label:"KYC Expiry"},i("kycExpiry",{rules:[{required:!0}]})(a.a.createElement(_.a,null))),a.a.createElement(P,{name:"canBuyFromSto",label:"Can Buy from STO"},i("canBuyFromSto",{valuePropName:"checked"})(a.a.createElement(j.a,null))),a.a.createElement(P,{name:"isAccredited",label:"Accredited"},i("isAccredited",{valuePropName:"checked"})(a.a.createElement(j.a,null))),a.a.createElement(P,null,a.a.createElement(A.a,{onClick:function(){O({type:"CLOSE_FORM"}),E()}},"cancel"),a.a.createElement(A.a,{onClick:S},"save"))))))},J={1:{polymathRegistryAddress:"0xdfabf3e4793cd30affb47ab6fa4cf4eef26bbc27"},42:{polymathRegistryAddress:"0x5b215a7d39ee305ad28da29bf2f0425c6c2a00b3"}};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach(function(t){Object(u.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Q=E.a.Content,Z=E.a.Header,ee=p.a.Option,te=f.a.Text,re={shareholders:[],tokens:void 0,editingShareholder:!1,selectedToken:void 0,fetching:!1,walletAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0,tip:""};function ne(e,t){switch(console.log("ACTION",t),t.type){case k.CONNECTING:return $({},e,{connecting:!0,tip:"Connecting...",error:void 0});case k.CONNECTED:return $({},e,{polyClient:t.polyClient,networkId:t.networkId,walletAddress:t.walletAddress,connecting:!1,tip:"",error:void 0});case k.CONNECTION_ERROR:return $({},e,{error:t.error,tokens:void 0,connecting:!1,tip:""});case k.FETCHING_TOKENS:return $({},e,{fetching:!0,tip:"Fetching tokens"});case k.FETCHED_TOKENS:var r=t.tokens;return $({},e,{tokenSelectOpts:t.tokenSelectOpts,tokens:r,fetching:!1,tip:""});case k.TOKEN_SELECTED:return $({},e,{selectedToken:t.selectedToken,tip:"Loading tokenholders...",fetching:!0});case k.RELOAD_SHAREHOLDERS:return $({},e,{fetching:!0,tip:"Reloading tokenholders...",reloadShareholders:!0});case k.SHAREHOLDERS_FETCHED:var n=t.shareholders;return $({},e,{shareholders:n=n.map(function(e){return Object.assign({},e,{canReceiveAfter:g()(e.canReceiveAfter),canSendAfter:g()(e.canSendAfter),kycExpiry:g()(e.kycExpiry)})}),fetching:!1,tip:"",reloadShareholders:!1});case k.DELETING_SHAREHOLDER:return $({},e,{fetching:!0,tip:"Deleting token holder"});case k.SHAREHOLDER_DELETED:return $({},e,{fetching:!1,tip:""});case k.ERROR:return $({},e,{error:t.error,fetching:!1});default:throw new Error('Unrecognized action "'.concat(t.type,'"'))}}function ae(e){var t=e.networkId;t=t.toString();return a.a.createElement(n.Fragment,null,a.a.createElement(h.a,{type:"global",style:{marginRight:10,marginLeft:20}}),a.a.createElement(te,null,{0:"Disconnected",1:"Mainnet",42:"Kovan"}[t]))}function ce(e){var t=e.walletAddress;return t?a.a.createElement(n.Fragment,null,a.a.createElement(h.a,{type:"user",style:{marginRight:5,marginLeft:10}}),a.a.createElement(te,null,t)):null}var oe=function(){var e=Object(n.useReducer)(ne,re),t=Object(d.a)(e,2),r=t[0],c=t[1],o=r.shareholders,i=r.tokens,u=r.selectedToken,p=r.fetching,f=r.tip,h=r.walletAddress,v=r.connecting,g=r.error,b=r.networkId,S=r.connected,R=r.polyClient,C=r.reloadShareholders,x=r.tokenSelectOpts;function A(){return(A=Object(s.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i[u].shareholders.modifyData({shareholderData:t});case 2:return r=e.sent,e.next=5,r.run();case 5:c({type:k.RELOAD_SHAREHOLDERS});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=Object(s.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:k.DELETING_SHAREHOLDER}),e.prev=1,e.next=4,i[u].shareholders.revokeKyc({shareholderAddresses:t});case 4:return r=e.sent,e.next=7,r.run();case 7:c({type:k.SHAREHOLDER_DELETED}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:c({type:k.RELOAD_SHAREHOLDERS});case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){function e(){return(e=Object(s.a)(l.a.mark(function e(t){var r,n,a,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:k.CONNECTING}),e.prev=1,e.next=4,O.browserUtils.getNetworkId();case 4:return r=e.sent,e.next=7,O.browserUtils.getCurrentAddress();case 7:if(n=e.sent,[-1,1,42].includes(r)){e.next=11;break}return t({type:k.CONNECTION_ERROR,error:"Please switch to either Main or Kovan network"}),e.abrupt("return");case 11:return a=J[r],c=new O.Polymath,e.next=15,c.connect(a);case 15:t({type:k.CONNECTED,networkId:r,polyClient:c,walletAddress:n}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),t({type:k.CONNECTION_ERROR,error:e.t0.message});case 21:case"end":return e.stop()}},e,null,[[1,18]])}))).apply(this,arguments)}S||function(t){e.apply(this,arguments)}(c)},[S]),Object(n.useEffect)(function(){function e(){return(e=Object(s.a)(l.a.mark(function e(t,r,n){var c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:k.FETCHING_TOKENS}),e.next=3,r.getSecurityTokens({walletAddress:n});case 3:c=e.sent,o=c.map(function(e,t){return a.a.createElement(ee,{value:t,key:t},e.symbol)}),t({type:k.FETCHED_TOKENS,tokens:c,tokenSelectOpts:o});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}R&&h&&!i&&function(t,r,n){e.apply(this,arguments)}(c,R,h)},[h,R,i]),Object(n.useEffect)(function(){function e(){return(e=Object(s.a)(l.a.mark(function e(t,r){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.shareholders.getShareholders();case 2:n=e.sent,t({type:k.SHAREHOLDERS_FETCHED,shareholders:n});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!0===C|void 0!==u&&function(t,r){e.apply(this,arguments)}(c,i[u])},[i,u,C]),a.a.createElement("div",{className:"App"},a.a.createElement(fe.Provider,{value:c},a.a.createElement(m.a,{spinning:p||v,tip:f,size:"large"},a.a.createElement(E.a,null,a.a.createElement(Z,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},a.a.createElement(ae,{networkId:b}),a.a.createElement(ce,{walletAddress:h})),a.a.createElement(Q,{style:{padding:50,backgroundColor:"#FAFDFF"}},g&&a.a.createElement(y.a,{message:g,type:"error"}),h&&a.a.createElement(w,{tokenSelectOpts:x}),void 0!==u&&a.a.createElement(z,{modifyWhitelist:function(e){return A.apply(this,arguments)},removeShareholders:function(e){return T.apply(this,arguments)},shareholders:o}))))))},ie=r(441),le=r(442),se=r(444),de=r(443),ue=r(445),Ee=function(e){function t(e){var r;return Object(ie.a)(this,t),(r=Object(se.a)(this,Object(de.a)(t).call(this,e))).state={hasError:!1},r}return Object(ue.a)(t,e),Object(le.a)(t,[{key:"componentDidCatch",value:function(e,t){var r;(r=console).error.apply(r,["ErrorBoundary"].concat(Array.prototype.slice.call(arguments)))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a.a.createContext(null),fe=t.default=pe;o.a.render(a.a.createElement(Ee,null,a.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},447:function(e,t,r){e.exports=r(1160)},452:function(e,t,r){},529:function(e,t){},531:function(e,t){},551:function(e,t){},553:function(e,t){},888:function(e,t){}},[[447,1,2]]]);
//# sourceMappingURL=main.2d728120.chunk.js.map