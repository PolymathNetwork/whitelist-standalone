(window["webpackJsonpwhite-label"]=window["webpackJsonpwhite-label"]||[]).push([[0],{1003:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1003},1177:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(7),o=n.n(i),c=(n(460),n(433));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},433:function(e,t,n){"use strict";(function(e){var r=n(13),a=n.n(r),i=n(451),o=n(103),c=n(434),s=n(1),l=n.n(s),d=n(267),u=n(115),f=n(8),p=n(270),m=n(197),h=n(1178),E=n(196),y=n(14),v=n.n(y),b=n(63),g=n(435),x=n(450);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=d.a.Content,C=d.a.Header,A=u.a.Option;function S(){return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0}}function R(e,t){switch(t.type){case b.a.CONNECTING:return k({},e,{tip:"Connecting...",connecting:!0,error:void 0});case b.a.CONNECTED:return k({},e,{},t.payload,{connecting:!1,tip:void 0,error:void 0});case b.a.CONNECTION_ERROR:return k({},e,{error:t.payload.error,connecting:!1});case b.a.TOKEN_SELECTED:return k({},e,{tokenIndex:t.payload.tokenIndex,tip:"Loading investors whitelist...",fetching:!0});case b.a.SHAREHOLDERS_FETCHED:return k({},e,{shareholders:t.payload.shareholders,fetching:!1,tip:void 0});case b.a.ERROR:return k({},e,{fetching:!1});case b.a.RESET:return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0};default:throw new Error('Unrecognised action "'.concat(t.type,'"'))}}function I(){return(I=Object(o.a)(a.a.mark(function e(t){var n,r,i,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b.a.CONNECTING}),e.prev=1,e.next=4,E.browserUtils.getNetworkId();case 4:return n=e.sent,e.next=7,E.browserUtils.getCurrentAddress();case 7:if(r=e.sent,[-1,1,42].includes(n)){e.next=11;break}return t({type:b.a.CONNECTION_ERROR,payload:{error:"Please switch to either Main or Kovan network"}}),e.abrupt("return");case 11:return i=x.a[n],o=new E.Polymath,e.next=15,o.connect(i);case 15:return e.next=17,o.getSecurityTokens({owner:r});case 17:c=e.sent,t({type:b.a.CONNECTED,payload:{networkId:n,polyClient:o,tokens:c,userAddress:r}}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),t({type:b.a.CONNECTION_ERROR,payload:{error:e.t0.message}});case 24:case"end":return e.stop()}},e,null,[[1,21]])}))).apply(this,arguments)}function N(e,t){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shareholders.getShareholders();case 2:r=(r=e.sent).map(function(e){return Object.assign({},e,{canReceiveAfter:v()(e.canReceiveAfter),canSendAfter:v()(e.canSendAfter),kycExpiry:v()(e.kycExpiry)})}),t({type:b.a.SHAREHOLDERS_FETCHED,payload:{shareholders:r}});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){var t=e.networkId;t=t.toString();return l.a.createElement(s.Fragment,null,l.a.createElement(f.a,{type:"global"}),l.a.createElement(p.a.Text,{style:{marginRight:5,marginLeft:10}},{0:"Disconnected",1:"Mainnet",42:"Kovan"}[t]))}function j(e){var t=e.userAddress;return t?l.a.createElement(s.Fragment,null,l.a.createElement(f.a,{type:"user"}),l.a.createElement(p.a.Text,{style:{marginRight:5,marginLeft:10}},t)):null}t.a=function(){var t=Object(s.useReducer)(R,{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0},S),n=Object(i.a)(t,2),r=n[0],c=n[1],f=r.shareholders,p=r.tokens,E=r.tokenIndex,y=r.fetching,v=r.tip,x=r.userAddress,O=r.connecting,k=r.error,F=r.networkId;function T(){return(T=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p[E].shareholders.modifyData({shareholderData:t});case 2:return n=e.sent,e.next=5,n.run();case 5:return e.next=7,N(c,p[E]);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.map(function(e){return{address:e.address,canReceiveAfter:0,canSendAfter:0,kycExpiry:0,isAccredited:0,canBuyFromSto:0}}),e.next=3,p[E].shareholders.modifyData({shareholderData:t});case 3:return n=e.sent,e.next=6,n.run();case 6:return e.next=8,N(c,p[E]);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(s.useEffect)(function(){!function(e){I.apply(this,arguments)}(c)},[]),Object(s.useEffect)(function(){void 0!==E&&(N(c,p[E]),e.token=p[E])},[p,E]),l.a.createElement("div",{className:"App"},l.a.createElement(m.a,{spinning:y||O,tip:v,size:"large"},l.a.createElement(d.a,null,l.a.createElement(C,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},l.a.createElement(D,{networkId:F}),l.a.createElement(j,{userAddress:x})),l.a.createElement(w,{style:{padding:50,backgroundColor:"#FAFDFF"}},k&&l.a.createElement(h.a,{message:k,type:"error"}),x&&l.a.createElement(u.a,{autoFocus:!0,showSearch:!0,style:{width:200,marginBottom:50},placeholder:"Select a token",optionFilterProp:"children",onChange:function(e){return c({type:b.a.TOKEN_SELECTED,payload:{tokenIndex:e}})},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},p?p.map(function(e,t){return l.a.createElement(A,{value:t,key:t},e.symbol)}):[]),void 0!==E&&l.a.createElement(g.a,{modifyWhitelist:function(e){return T.apply(this,arguments)},deleteShareholders:function(e){return _.apply(this,arguments)},shareholders:f})))))}}).call(this,n(39))},435:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(13),a=n.n(r),i=n(103),o=n(258),c=n(259),s=n(265),l=n(260),d=n(266),u=n(1),f=n.n(u),p=n(14),m=n.n(p),h=n(261),E=n(452),y=n(269),v=n(270),b=n(8),g=n(1179),x=n(197),O=n(1180),k=n(268),w=n(101),C=n(1181),A=n(60),S=E.a.Column,R=y.a.Item,I=v.a.Text,N={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};function F(e){return m()(e).format("YYYY-MM-DD")}function D(e){return e?f.a.createElement(u.Fragment,null,f.a.createElement(b.a,{style:{color:"#00AA5E"},type:"check-circle",theme:"filled"}),f.a.createElement("span",null,"   Yes")):f.a.createElement(u.Fragment,null,f.a.createElement(b.a,{style:{color:"#DB2C3E"},type:"close-circle",theme:"filled"}),f.a.createElement("span",null,"   No"))}var j={address:"",canSendAfter:m()().add(1,"hour"),canReceiveAfter:m()().add(1,"hour"),kycExpiry:m()().add(1,"year"),canBuyFromSto:!0,isAccredited:!1},T=y.a.create({name:"form_in_modal"})(function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onCancel,r=e.onOk,a=e.form,i=e.awaitingConfirmation,o=e.editedRecord,c=e.shareholderExists,s=o||j,l=a.getFieldDecorator;return f.a.createElement(g.a,{title:o?"Edit shareholder":"Add a new shareholder",okText:"Save",visible:t,onCancel:n,onOk:r,confirmLoading:i},f.a.createElement(x.a,{spinning:i,size:"large"},f.a.createElement(y.a,N,f.a.createElement(R,{name:"address",label:"Address"},l("address",{rules:[{required:!0},{validator:function(e,t,n){o||h.utils.isAddress(t)?n():n("Address is invalid")}},{validator:function(e,t,n){o||!c(t)?n():n("Shareholder is already present in the whitelist")}}],initialValue:s.address})(f.a.createElement(O.a,{disabled:!!o}))),f.a.createElement(R,{name:"canSendAfter",label:"Can Send after"},l("canSendAfter",{rules:[{required:!0}],initialValue:s.canSendAfter})(f.a.createElement(k.a,null))),f.a.createElement(R,{name:"canReceiveAfter",label:"Can Receive adter"},l("canReceiveAfter",{rules:[{required:!0}],initialValue:s.canReceiveAfter})(f.a.createElement(k.a,null))),f.a.createElement(R,{name:"kycExpiry",label:"KYC Expiry"},l("kycExpiry",{rules:[{required:!0}],initialValue:s.kycExpiry})(f.a.createElement(k.a,null))),f.a.createElement(R,{name:"canBuyFromSto",label:"Can Buy from STO"},l("canBuyFromSto",{valuePropName:"checked",initialValue:s.canBuyFromSto})(f.a.createElement(w.a,null))),f.a.createElement(R,{name:"isAccredited",label:"Accredited"},l("isAccredited",{valuePropName:"checked",initialValue:s.isAccredited})(f.a.createElement(w.a,null))))))}}]),t}(f.a.Component)),_=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,c=new Array(r),d=0;d<r;d++)c[d]=arguments[d];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={editIndex:"",visible:!1,awaitingConfirmation:!1},n.closeForm=function(){n.setState({editIndex:"",visible:!1,awaitingConfirmation:!1}),n.formRef.props.form.resetFields()},n.openForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({visible:!0,editIndex:e})},n.submitForm=Object(i.a)(a.a.mark(function e(){var t,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.formRef.props.form,r=n.props.modifyWhitelist,t.validateFields(function(){var e=Object(i.a)(a.a.mark(function e(i,o){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return n.setState({awaitingConfirmation:!0}),o.canSendAfter=o.canSendAfter.toDate(),o.canReceiveAfter=o.canReceiveAfter.toDate(),o.kycExpiry=o.kycExpiry.toDate(),e.prev=6,e.next=9,r([o]);case 9:n.setState({visible:!1,awaitingConfirmation:!1,editIndex:""}),t.resetFields(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),n.setState({awaitingConfirmation:!1}),C.a.error(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)})),n.saveFormRef=function(e){n.formRef=e},n.shareholderExists=function(e){return void 0!==n.props.shareholders.find(function(t){return t.address.toUpperCase()===e.toUpperCase()})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.awaitingConfirmation,a=t.editIndex,i=this.props,o=i.shareholders,c=(i.deleteShareholders,o.filter(function(e){return e.address===a})[0]);return f.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},f.a.createElement(A.a,{type:"primary",style:{marginBottom:20,alignSelf:"flex-end"},onClick:function(){return e.openForm()}},"Add new"),f.a.createElement(E.a,{dataSource:o,rowKey:"address"},f.a.createElement(S,{title:"Address",dataIndex:"address",key:"address",render:function(e){return f.a.createElement(I,null,h.utils.toChecksumAddress(e))}}),f.a.createElement(S,{title:"Can send after",dataIndex:"canSendAfter",key:"canSendAfter",render:function(e){return F(e)}}),f.a.createElement(S,{title:"Can receive after",dataIndex:"canReceiveAfter",key:"canReceiveAfter",render:function(e){return F(e)}}),f.a.createElement(S,{title:"KYC expiry",dataIndex:"kycExpiry",key:"kycExpiry",render:function(e){return F(e)}}),f.a.createElement(S,{title:"Can buy from STO",dataIndex:"canBuyFromSto",key:"canBuyFromSto",render:function(e){return D(e)}}),f.a.createElement(S,{title:"Is accredited",dataIndex:"isAccredited",key:"isAccredited",render:function(e){return D(e)}}),f.a.createElement(S,{render:function(t,n){return f.a.createElement(u.Fragment,null,f.a.createElement(A.a,{onClick:function(){return e.openForm(n.address)}},f.a.createElement(b.a,{type:"edit",theme:"filled"})))}})),f.a.createElement(T,{wrappedComponentRef:this.saveFormRef,visible:n,onCancel:this.closeForm,onOk:this.submitForm,awaitingConfirmation:r,editedRecord:c,shareholderExists:this.shareholderExists}))}}]),t}(f.a.Component)},450:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={1:{polymathRegistryAddress:"0xdfabf3e4793cd30affb47ab6fa4cf4eef26bbc27"},42:{polymathRegistryAddress:"0x5b215a7d39ee305ad28da29bf2f0425c6c2a00b3"}}},455:function(e,t,n){e.exports=n(1177)},460:function(e,t,n){},579:function(e,t){},581:function(e,t){},601:function(e,t){},603:function(e,t){},63:function(e,t,n){"use strict";t.a={CONNECTING:"connecting",CONNECTED:"connected",CONNECTION_ERROR:"connection_error",RESET:"reset",ERROR:"error",SHAREHOLDERS_FETCHED:"shareholders_fetched",TOKEN_SELECTED:"token_selected"}},890:function(e,t){}},[[455,1,2]]]);
//# sourceMappingURL=main.c5c243aa.chunk.js.map