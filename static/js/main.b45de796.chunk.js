(window["webpackJsonpwhite-label"]=window["webpackJsonpwhite-label"]||[]).push([[0],{1147:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(7),i=r.n(o),c=(r(457),r(430)),s=r(153),l=r(154),d=r(160),u=r(155),f=r(161),p=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},r}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){var r;(r=console).error.apply(r,["ErrorBoundary"].concat(Array.prototype.slice.call(arguments)))}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(p,null,a.a.createElement(c.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},430:function(e,t,r){"use strict";(function(e){var n=r(10),a=r.n(n),o=r(448),i=r(105),c=r(431),s=r(1),l=r.n(s),d=r(273),u=r(118),f=r(8),p=r(162),m=r(208),h=r(1148),E=r(207),y=r(19),v=r.n(y),O=r(59),b=r(432),g=r(447);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach(function(t){Object(c.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=d.a.Content,C=d.a.Header,S=u.a.Option;function R(){return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0}}function A(e,t){switch(t.type){case O.a.CONNECTING:return k({},e,{tip:"Connecting...",connecting:!0,error:void 0});case O.a.CONNECTED:return k({},e,{},t.payload,{connecting:!1,tip:void 0,error:void 0});case O.a.CONNECTION_ERROR:return k({},e,{error:t.payload.error,connecting:!1});case O.a.TOKEN_SELECTED:return k({},e,{tokenIndex:t.payload.tokenIndex,tip:"Loading investors whitelist...",fetching:!0});case O.a.SHAREHOLDERS_FETCHED:return k({},e,{fetching:!1,tip:void 0});case O.a.STORE_SHAREHOLDERS:var r=t.payload.shareholders;return k({},e,{shareholders:r=r.map(function(e){return Object.assign({},e,{canReceiveAfter:v()(e.canReceiveAfter),canSendAfter:v()(e.canSendAfter),kycExpiry:v()(e.kycExpiry)})})});case O.a.ERROR:return k({},e,{fetching:!1});case O.a.RESET:return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0};default:throw new Error('Unrecognised action "'.concat(t.type,'"'))}}function D(){return(D=Object(i.a)(a.a.mark(function e(t){var r,n,o,i,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O.a.CONNECTING}),e.prev=1,e.next=4,E.browserUtils.getNetworkId();case 4:return r=e.sent,e.next=7,E.browserUtils.getCurrentAddress();case 7:if(n=e.sent,[-1,1,42].includes(r)){e.next=11;break}return t({type:O.a.CONNECTION_ERROR,payload:{error:"Please switch to either Main or Kovan network"}}),e.abrupt("return");case 11:return o=g.a[r],i=new E.Polymath,e.next=15,i.connect(o);case 15:return e.next=17,i.getSecurityTokens({owner:n});case 17:c=e.sent,t({type:O.a.CONNECTED,payload:{networkId:r,polyClient:i,tokens:c,userAddress:n}}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),t({type:O.a.CONNECTION_ERROR,payload:{error:e.t0.message}});case 24:case"end":return e.stop()}},e,null,[[1,21]])}))).apply(this,arguments)}function j(e,t){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(a.a.mark(function e(t,r){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.shareholders.getShareholders();case 2:n=e.sent,t({type:O.a.SHAREHOLDERS_FETCHED}),t({type:O.a.STORE_SHAREHOLDERS,payload:{shareholders:n}});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){var t=e.networkId;t=t.toString();return l.a.createElement(s.Fragment,null,l.a.createElement(f.a,{type:"global",style:{marginRight:10,marginLeft:20}}),l.a.createElement(p.a.Text,null,{0:"Disconnected",1:"Mainnet",42:"Kovan"}[t]))}function T(e){var t=e.userAddress;return t?l.a.createElement(s.Fragment,null,l.a.createElement(f.a,{type:"user",style:{marginRight:5,marginLeft:10}}),l.a.createElement(p.a.Text,null,t)):null}t.a=function(){var t=Object(s.useReducer)(A,{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:"",polyClient:void 0,connected:!1,error:"",networkId:0},R),r=Object(o.a)(t,2),n=r[0],c=r[1],f=n.shareholders,E=n.tokens,y=n.tokenIndex,v=n.fetching,g=n.tip,w=n.userAddress,k=n.connecting,I=n.error,F=n.networkId;function _(){return(_=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E[y].shareholders.modifyData({shareholderData:t});case 2:return r=e.sent,e.next=5,r.run();case 5:c({type:O.a.STORE_SHAREHOLDERS,payload:{shareholders:t}});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.map(function(e){return{address:e.address,canReceiveAfter:0,canSendAfter:0,kycExpiry:0,isAccredited:0,canBuyFromSto:0}}),e.next=3,E[y].shareholders.modifyData({shareholderData:t});case 3:return r=e.sent,e.next=6,r.run();case 6:return e.next=8,j(c,E[y]);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(s.useEffect)(function(){!function(e){D.apply(this,arguments)}(c)},[]),Object(s.useEffect)(function(){void 0!==y&&(j(c,E[y]),e.token=E[y])},[E,y]),l.a.createElement("div",{className:"App"},l.a.createElement(m.a,{spinning:v||k,tip:g,size:"large"},l.a.createElement(d.a,null,l.a.createElement(C,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},l.a.createElement(N,{networkId:F}),l.a.createElement(T,{userAddress:w})),l.a.createElement(x,{style:{padding:50,backgroundColor:"#FAFDFF"}},I&&l.a.createElement(h.a,{message:I,type:"error"}),w&&l.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:250,justifyContent:"flex-start"}},l.a.createElement(p.a.Title,{level:3},"Please Select a Token"),l.a.createElement(p.a.Text,{style:{paddingTop:20,paddingBottom:20,width:"100%"}},"Once you select a token, you will be able to manage investors white-list by adding, editing or removing investors."),l.a.createElement(u.a,{autoFocus:!0,showSearch:!0,style:{width:"100%",marginBottom:40},placeholder:"Select a token",optionFilterProp:"children",onChange:function(e){return c({type:O.a.TOKEN_SELECTED,payload:{tokenIndex:e}})},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},E?E.map(function(e,t){return l.a.createElement(S,{value:t,key:t},e.symbol)}):[])),void 0!==y&&l.a.createElement(b.a,{modifyWhitelist:function(e){return _.apply(this,arguments)},deleteShareholders:function(e){return H.apply(this,arguments)},shareholders:f})))))}}).call(this,r(37))},432:function(e,t,r){"use strict";r.d(t,"a",function(){return _});var n=r(10),a=r.n(n),o=r(105),i=r(153),c=r(154),s=r(160),l=r(155),d=r(161),u=r(1),f=r.n(u),p=r(19),m=r.n(p),h=r(269),E=r(449),y=r(275),v=r(162),O=r(8),b=r(1149),g=r(208),w=r(1150),k=r(274),x=r(103),C=r(1151),S=r(63),R=E.a.Column,A=y.a.Item,D=v.a.Text,j={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};function I(e){return m()(e).format("YYYY-MM-DD")}function N(e){return e?f.a.createElement(u.Fragment,null,f.a.createElement(O.a,{style:{color:"#00AA5E"},type:"check-circle",theme:"filled"}),f.a.createElement("span",null,"   Yes")):f.a.createElement(u.Fragment,null,f.a.createElement(O.a,{style:{color:"#DB2C3E"},type:"close-circle",theme:"filled"}),f.a.createElement("span",null,"   No"))}var T={address:"",canSendAfter:m()().add(1,"hour"),canReceiveAfter:m()().add(1,"hour"),kycExpiry:m()().add(1,"year"),canBuyFromSto:!0,isAccredited:!1},F=y.a.create({name:"form_in_modal"})(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,r=e.onCancel,n=e.onOk,a=e.form,o=e.awaitingConfirmation,i=e.editedRecord,c=e.shareholderExists,s=i||T,l=a.getFieldDecorator;return f.a.createElement(b.a,{title:i?"Edit shareholder":"Add a new shareholder",okText:"Save",visible:t,onCancel:r,onOk:n,confirmLoading:o},f.a.createElement(g.a,{spinning:o,size:"large"},f.a.createElement(y.a,j,f.a.createElement(A,{name:"address",label:"Address"},l("address",{rules:[{required:!0},{validator:function(e,t,r){i||h.utils.isAddress(t)?r():r("Address is invalid")}},{validator:function(e,t,r){i||!c(t)?r():r("Shareholder is already present in the whitelist")}}],initialValue:s.address})(f.a.createElement(w.a,{disabled:!!i}))),f.a.createElement(A,{name:"canSendAfter",label:"Can Send after"},l("canSendAfter",{rules:[{required:!0}],initialValue:s.canSendAfter})(f.a.createElement(k.a,null))),f.a.createElement(A,{name:"canReceiveAfter",label:"Can Receive adter"},l("canReceiveAfter",{rules:[{required:!0}],initialValue:s.canReceiveAfter})(f.a.createElement(k.a,null))),f.a.createElement(A,{name:"kycExpiry",label:"KYC Expiry"},l("kycExpiry",{rules:[{required:!0}],initialValue:s.kycExpiry})(f.a.createElement(k.a,null))),f.a.createElement(A,{name:"canBuyFromSto",label:"Can Buy from STO"},l("canBuyFromSto",{valuePropName:"checked",initialValue:s.canBuyFromSto})(f.a.createElement(x.a,null))),f.a.createElement(A,{name:"isAccredited",label:"Accredited"},l("isAccredited",{valuePropName:"checked",initialValue:s.isAccredited})(f.a.createElement(x.a,null))))))}}]),t}(f.a.Component)),_=function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),d=0;d<n;d++)c[d]=arguments[d];return(r=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={editIndex:"",visible:!1,awaitingConfirmation:!1},r.closeForm=function(){r.setState({editIndex:"",visible:!1,awaitingConfirmation:!1}),r.formRef.props.form.resetFields()},r.openForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r.setState({visible:!0,editIndex:e})},r.submitForm=Object(o.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.formRef.props.form,n=r.props.modifyWhitelist,t.validateFields(function(){var e=Object(o.a)(a.a.mark(function e(o,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return r.setState({awaitingConfirmation:!0}),i.canSendAfter=i.canSendAfter.toDate(),i.canReceiveAfter=i.canReceiveAfter.toDate(),i.kycExpiry=i.kycExpiry.toDate(),e.prev=6,e.next=9,n([i]);case 9:r.setState({visible:!1,awaitingConfirmation:!1,editIndex:""}),t.resetFields(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),r.setState({awaitingConfirmation:!1}),C.a.error(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t,r){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)})),r.saveFormRef=function(e){r.formRef=e},r.shareholderExists=function(e){return void 0!==r.props.shareholders.find(function(t){return t.address.toUpperCase()===e.toUpperCase()})},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,r=t.visible,n=t.awaitingConfirmation,a=t.editIndex,o=this.props,i=o.shareholders,c=(o.deleteShareholders,i.filter(function(e){return e.address===a})[0]);return f.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},f.a.createElement(S.a,{type:"primary",style:{marginBottom:20,alignSelf:"flex-end"},onClick:function(){return e.openForm()}},"Add new"),f.a.createElement(E.a,{dataSource:i,rowKey:"address"},f.a.createElement(R,{title:"Address",dataIndex:"address",key:"address",render:function(e){return f.a.createElement(D,null,h.utils.toChecksumAddress(e))}}),f.a.createElement(R,{title:"Can send after",dataIndex:"canSendAfter",key:"canSendAfter",render:function(e){return I(e)}}),f.a.createElement(R,{title:"Can receive after",dataIndex:"canReceiveAfter",key:"canReceiveAfter",render:function(e){return I(e)}}),f.a.createElement(R,{title:"KYC expiry",dataIndex:"kycExpiry",key:"kycExpiry",render:function(e){return I(e)}}),f.a.createElement(R,{title:"Can buy from STO",dataIndex:"canBuyFromSto",key:"canBuyFromSto",render:function(e){return N(e)}}),f.a.createElement(R,{title:"Is accredited",dataIndex:"isAccredited",key:"isAccredited",render:function(e){return N(e)}}),f.a.createElement(R,{render:function(t,r){return f.a.createElement(u.Fragment,null,f.a.createElement(S.a,{onClick:function(){return e.openForm(r.address)}},f.a.createElement(O.a,{type:"edit",theme:"filled"})))}})),f.a.createElement(F,{wrappedComponentRef:this.saveFormRef,visible:r,onCancel:this.closeForm,onOk:this.submitForm,awaitingConfirmation:n,editedRecord:c,shareholderExists:this.shareholderExists}))}}]),t}(f.a.Component)},447:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={1:{polymathRegistryAddress:"0xdfabf3e4793cd30affb47ab6fa4cf4eef26bbc27"},42:{polymathRegistryAddress:"0x5b215a7d39ee305ad28da29bf2f0425c6c2a00b3"}}},452:function(e,t,r){e.exports=r(1147)},457:function(e,t,r){},535:function(e,t){},537:function(e,t){},557:function(e,t){},559:function(e,t){},59:function(e,t,r){"use strict";t.a={CONNECTING:"connecting",CONNECTED:"connected",CONNECTION_ERROR:"connection_error",RESET:"reset",ERROR:"error",SHAREHOLDERS_FETCHED:"shareholders_fetched",STORE_SHAREHOLDERS:"store_shareholders",TOKEN_SELECTED:"token_selected"}},892:function(e,t){},984:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=984}},[[452,1,2]]]);
//# sourceMappingURL=main.b45de796.chunk.js.map