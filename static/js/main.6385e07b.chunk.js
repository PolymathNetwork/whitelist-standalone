(window["webpackJsonpwhite-label"]=window["webpackJsonpwhite-label"]||[]).push([[0],{1004:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1004},1054:function(e,t,n){e.exports=n.p+"static/media/icon-true.948f1865.svg"},1181:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(7),o=n.n(i),c=(n(461),n(434));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},434:function(e,t,n){"use strict";(function(e){var r=n(15),a=n.n(r),i=n(452),o=n(113),c=n(435),s=n(1),l=n.n(s),d=n(269),u=n(199),f=n(1182),p=n(115),m=n(198),h=n(197),E=n(16),y=n.n(E),v=n(79),b=n(436);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=d.a.Content,g=d.a.Header,O=(u.a.Item,f.a.TabPane,p.a.Option);function C(){return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:""}}function A(e,t){switch(t.type){case v.a.CONNECTING:return k({},e,{tip:"Loading your tokens...",fetching:!0});case v.a.CONNECTED:return k({},e,{},t.payload,{fetching:!1});case v.a.TOKEN_SELECTED:return k({},e,{tokenIndex:t.payload.tokenIndex,tip:"Loading investors whitelist...",fetching:!0});case v.a.SHAREHOLDERS_FETCHED:return k({},e,{shareholders:t.payload.shareholders,fetching:!1});case v.a.ERROR:return k({},e,{fetching:!1});case v.a.RESET:return{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:""};default:throw new Error('Unrecognised action "'.concat(t.type,'"'))}}function S(){return(S=Object(o.a)(a.a.mark(function e(t){var n,r,i,o,c,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v.a.CONNECTING}),n={1:{polymathRegistryAddress:"0x240f9f86b1465bf1b8eb29bc88cbf65573dfdd97"},42:{polymathRegistryAddress:"0x5b215a7d39ee305ad28da29bf2f0425c6c2a00b3"}},e.next=4,h.browserUtils.getNetworkId();case 4:return r=e.sent,e.next=7,h.browserUtils.getCurrentAddress();case 7:return i=e.sent,o=n[r],c=new h.Polymath,e.next=12,c.connect(o);case 12:return e.next=14,c.getSecurityTokens({owner:i});case 14:s=e.sent,t({type:v.a.CONNECTED,payload:{networkId:r,polyClient:c,tokens:s,userAddress:i}});case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shareholders.getShareholders();case 2:r=(r=e.sent).map(function(e){return Object.assign({},e,{canReceiveAfter:y()(e.canReceiveAfter),canSendAfter:y()(e.canSendAfter),kycExpiry:y()(e.kycExpiry)})}),t({type:v.a.SHAREHOLDERS_FETCHED,payload:{shareholders:r}});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.a=function(){var t=Object(s.useReducer)(A,{shareholders:[],tokens:void 0,editingShareholder:!1,tokenIndex:void 0,fetching:!1,userAddress:""},C),n=Object(i.a)(t,2),r=n[0],c=n[1],u=r.shareholders,f=r.tokens,h=r.tokenIndex,E=r.fetching,y=r.tip,x=r.userAddress;function k(){return(k=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f[h].shareholders.modifyData({shareholderData:t});case 3:return n=e.sent,e.next=6,n.run();case 6:R(c,f[h]),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}return Object(s.useEffect)(function(){!function(e){S.apply(this,arguments)}(c)},[]),Object(s.useEffect)(function(){h&&(R(c,f[h]),e.token=f[h])},[f,h]),l.a.createElement("div",{className:"App"},l.a.createElement(m.a,{spinning:E,tip:y,size:"large"},l.a.createElement(d.a,null,l.a.createElement(g,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end"}},l.a.createElement("span",{style:{color:"#1348E4"}},x)),l.a.createElement(w,{style:{padding:50,backgroundColor:"#FAFDFF"}},l.a.createElement(p.a,{autoFocus:!0,showSearch:!0,style:{width:200,marginBottom:50},placeholder:"Select a token",optionFilterProp:"children",onChange:function(e){return c({type:v.a.TOKEN_SELECTED,payload:{tokenIndex:e}})},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},f?f.map(function(e,t){return l.a.createElement(O,{value:t,key:t},e.symbol)}):[]),u.length>0&&l.a.createElement(b.a,{modifyWhitelist:function(e){return k.apply(this,arguments)},shareholders:u})))))}}).call(this,n(41))},436:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var r=n(15),a=n.n(r),i=n(113),o=n(260),c=n(261),s=n(267),l=n(262),d=n(268),u=n(1),f=n.n(u),p=n(16),m=n.n(p),h=n(263),E=n(453),y=n(199),v=n(1183),b=n(8),x=n(1184),k=n(198),w=n(1185),g=n(270),O=n(101),C=n(1186),A=n(60),S=(n(1054),E.a.Column),R=y.a.Item,j=v.a.Text,F={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};function D(e){return m()(e).format("YYYY-MM-DD")}function I(e){return e?f.a.createElement(u.Fragment,null,f.a.createElement(b.a,{style:{color:"#00AA5E"},type:"check-circle",theme:"filled"}),f.a.createElement("span",null,"   Yes")):f.a.createElement(u.Fragment,null,f.a.createElement(b.a,{style:{color:"#DB2C3E"},type:"close-circle",theme:"filled"}),f.a.createElement("span",null,"   No"))}var N={address:"",canSendAfter:m()().add(1,"hour"),canReceiveAfter:m()().add(1,"hour"),kycExpiry:m()().add(1,"year"),canBuyFromSto:!0,isAccredited:!1},T=y.a.create({name:"form_in_modal"})(function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onCancel,r=e.onOk,a=e.form,i=e.awaitingConfirmation,o=e.editedRecord,c=e.shareholderExists,s=o||N,l=a.getFieldDecorator;return f.a.createElement(x.a,{title:o?"Edit shareholder":"Add a new shareholder",okText:"Save",visible:t,onCancel:n,onOk:r,confirmLoading:i},f.a.createElement(k.a,{spinning:i,size:"large"},f.a.createElement(y.a,F,f.a.createElement(R,{name:"address",label:"Address"},l("address",{rules:[{required:!0},{validator:function(e,t,n){o||h.utils.isAddress(t)?n():n("Address is invalid")}},{validator:function(e,t,n){o||!c(t)?n():n("Shareholder is already present in the whitelist")}}],initialValue:s.address})(f.a.createElement(w.a,{disabled:!!o}))),f.a.createElement(R,{name:"canSendAfter",label:"Can Send after"},l("canSendAfter",{rules:[{required:!0}],initialValue:s.canSendAfter})(f.a.createElement(g.a,null))),f.a.createElement(R,{name:"canReceiveAfter",label:"Can Receive adter"},l("canReceiveAfter",{rules:[{required:!0}],initialValue:s.canReceiveAfter})(f.a.createElement(g.a,null))),f.a.createElement(R,{name:"kycExpiry",label:"KYC Expiry"},l("kycExpiry",{rules:[{required:!0}],initialValue:s.kycExpiry})(f.a.createElement(g.a,null))),f.a.createElement(R,{name:"canBuyFromSto",label:"Can Buy from STO"},l("canBuyFromSto",{valuePropName:"checked",initialValue:s.canBuyFromSto})(f.a.createElement(O.a,null))),f.a.createElement(R,{name:"isAccredited",label:"Accredited"},l("isAccredited",{valuePropName:"checked",initialValue:s.isAccredited})(f.a.createElement(O.a,null))))))}}]),t}(f.a.Component)),P=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,c=new Array(r),d=0;d<r;d++)c[d]=arguments[d];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={editIndex:"",visible:!1,awaitingConfirmation:!1},n.closeForm=function(){n.setState({editIndex:"",visible:!1,awaitingConfirmation:!1}),n.formRef.props.form.resetFields()},n.openForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({visible:!0,editIndex:e})},n.submitForm=Object(i.a)(a.a.mark(function e(){var t,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.formRef.props.form,r=n.props.modifyWhitelist,t.validateFields(function(){var e=Object(i.a)(a.a.mark(function e(i,o){var c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return n.setState({awaitingConfirmation:!0}),o.canSendAfter=o.canSendAfter.toDate(),o.canReceiveAfter=o.canReceiveAfter.toDate(),o.kycExpiry=o.kycExpiry.toDate(),e.next=8,r([o]);case 8:(c=e.sent)?(n.setState({awaitingConfirmation:!1}),C.a.error(c.message)):(n.setState({visible:!1,awaitingConfirmation:!1,editIndex:""}),t.resetFields());case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)})),n.saveFormRef=function(e){n.formRef=e},n.shareholderExists=function(e){return void 0!==n.props.shareholders.find(function(t){return t.address.toUpperCase()===e.toUpperCase()})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.awaitingConfirmation,a=t.editIndex,i=this.props.shareholders,o=i.filter(function(e){return e.address===a})[0];return f.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},f.a.createElement(A.a,{type:"primary",style:{marginBottom:20,alignSelf:"flex-end"},onClick:function(){return e.openForm()}},"Add new"),f.a.createElement(E.a,{dataSource:i,rowKey:"address"},f.a.createElement(S,{title:"Address",dataIndex:"address",key:"address",render:function(e){return f.a.createElement(j,null,h.utils.toChecksumAddress(e))}}),f.a.createElement(S,{title:"Can send after",dataIndex:"canSendAfter",key:"canSendAfter",render:function(e){return D(e)}}),f.a.createElement(S,{title:"Can receive after",dataIndex:"canReceiveAfter",key:"canReceiveAfter",render:function(e){return D(e)}}),f.a.createElement(S,{title:"KYC expiry",dataIndex:"kycExpiry",key:"kycExpiry",render:function(e){return D(e)}}),f.a.createElement(S,{title:"Can buy from STO",dataIndex:"canBuyFromSto",key:"canBuyFromSto",render:function(e){return I(e)}}),f.a.createElement(S,{title:"Is accredited",dataIndex:"isAccredited",key:"isAccredited",render:function(e){return I(e)}}),f.a.createElement(S,{render:function(t,n){return f.a.createElement(A.a,{onClick:function(){return e.openForm(n.address)}},f.a.createElement(b.a,{type:"edit"}))}})),f.a.createElement(T,{wrappedComponentRef:this.saveFormRef,visible:n,onCancel:this.closeForm,onOk:this.submitForm,awaitingConfirmation:r,editedRecord:o,shareholderExists:this.shareholderExists}))}}]),t}(f.a.Component)},456:function(e,t,n){e.exports=n(1181)},461:function(e,t,n){},580:function(e,t){},582:function(e,t){},602:function(e,t){},604:function(e,t){},79:function(e,t,n){"use strict";t.a={CONNECTING:"connecting",CONNECTED:"connected",RESET:"reset",ERROR:"error",SHAREHOLDERS_FETCHED:"shareholders_fetched",TOKEN_SELECTED:"token_selected"}},891:function(e,t){}},[[456,1,2]]]);
//# sourceMappingURL=main.6385e07b.chunk.js.map